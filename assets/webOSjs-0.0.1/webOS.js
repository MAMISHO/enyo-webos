window.webOS = window.webOS || {};

 // device.js
(function(){try{var e=JSON.parse(PalmSystem.deviceInfo);webOS.device=e}catch(c){webOS.device={}}})();

 // platform.js
(function(){if(window.PalmSystem){if(navigator.userAgent.indexOf("SmartTV")>-1){webOS.platform={tv:true}}else if(device.platformVersionMajor&&device.platformVersionMinor&&parseInt(device.platformVersionMajor)==3&&parseInt(device.platformVersionMinor)>0){webOS.platform={open:true}}else{webOS.platform={legacy:true}}}})();

 // application.js
(function(){webOS.fetchAppId=function(){if(window.PalmSystem){return PalmSystem.identifier.split(" ")[0]}};webOS.fetchAppInfo=function(){if(!this.appInfo){var e=function(e){if(window.palmGetResource){try{return palmGetResource(e)}catch(n){console.log("error reading appinfo.json"+n.message)}}else{var t=new XMLHttpRequest;t.open("GET",e+"?palmGetResource=true",false);t.send(null);if(t.status>=200&&t.status<300){return t.responseText}else{console.log("error reading appinfo.json")}}};var n=this.fetchAppId();var t=[this.fetchAppRootPath()+"appinfo.json","file:///media/cryptofs/apps/usr/palm/applications/"+n+"/appinfo.json","file:///usr/palm/applications/"+n+"/appinfo.json"];var i=t[0].indexOf(n);if(i>-1){t.unshift(t[0].substring(0,i)+n+"/appinfo.json")}var o=undefined;for(var a=0;a<t.length&&!o;a++){o=e(t[a])}if(o){this.appInfo=enyo.json.parse(o)}}return this.appInfo};webOS.fetchAppRootPath=function(){var e=window.location.href;if("baseURI"in window.document){e=window.document.baseURI}else{var n=window.document.getElementsByTagName("base");if(n.length>0){e=n[0].href}}var t=e.match(new RegExp(".*://[^#]*/"));if(t){return t[0]}return""};webOS.isBackEvent=function(e){return e.keyCode==27||e.keyCode==461||e.keyIdentifier=="U+1200001"||e.keyIdentifier=="U+001B"||e.keyIdentifier=="Back"}})();

 // keyboard.js
(function(){var e=!(webOS.platform.legacy&&webOS.device.platformVersionMajor&&parseInt(webOS.device.platformVersionMajor)<3);if(e){var o={};Mojo=window.Mojo||{};Mojo.keyboardShown=function(e){o.isShowing=e};webOS.keyboard={types:{text:0,password:1,search:2,range:3,email:4,number:5,phone:6,url:7,color:8},isShowing:function(){return o.isShowing||false},show:function(e){if(this.isManualMode()&&window.PalmSystem){PalmSystem.keyboardShow(e||0)}},hide:function(){if(this.isManualMode()&&window.PalmSystem){PalmSystem.keyboardHide()}},setManualMode:function(e){o.manual=e;if(window.PalmSystem){PalmSystem.setManualKeyboardEnabled(e)}},isManualMode:function(){return o.manual||false},forceShow:function(e){this.setManualMode(true);if(window.PalmSystem){PalmSystem.keyboardShow(e||0)}},forceHide:function(){this.setManualMode(true);if(window.PalmSystem){PalmSystem.keyboardHide()}}}}})();

 // launch.js
(function(){if((webOS.platform.legacy||webOS.platform.open)&&!window.cordova){var e=function(e,a){var n=document.createEvent("Events");n.initEvent(e,false,false);for(var t in a){n[t]=a[t]}document.dispatchEvent(n)};Mojo=window.Mojo||{};var a=JSON.parse(PalmSystem.launchParams||"{}")||{};e("webOSLaunch",{type:"webOSLaunch",detail:a});window.Mojo.relaunch=function(a){var n=JSON.parse(PalmSystem.launchParams||"{}")||{};if(n["palm-command"]&&n["palm-command"]=="open-app-menu"){e("menubutton",{});return true}else{e("webOSRelaunch",{type:"webOSRelaunch",detail:n})}};window.PalmSystem.stageReady()}})();

 // notification.js
(function(){webOS.notification={showToast:function(e,a){var o=e.message||"";var t=e.icon||"";var s=webOS.fetchAppId();var n=e.appId||s;var r=e.params||{};var i=e.target;var c=e.noaction;var l=e.stale||false;var m=e.soundClass||"";var f=e.soundFile||"";var p=e.soundDurationMs||"";if(webOS.platform.legacy||webOS.platform.open){var d=e.response||{banner:true};var w=PalmSystem.addBannerMessage(o,JSON.stringify(r),t,m,f,p);a&&a(w)}else{if(o.length>60){console.warn("Toast notification message is longer than recommended. May not display as intended")}var u={sourceId:s,message:o,stale:l,noaction:c};if(t&&t.length>0){u.iconUrl=t}if(!c){if(i){u.onclick={target:i}}else{u.onclick={appId:n,params:r}}}this.showToastRequest=webOS.service.request("palm://com.webos.notification",{method:"createToast",parameters:u,onSuccess:function(e){a&&a(e.toastId)},onFailure:function(e){console.error("Failed to create toast: "+JSON.stringify(e));a&&a()}})}},removeToast:function(e){if(webOS.platform.legacy||webOS.platform.open){try{PalmSystem.removeBannerMessage(e)}catch(a){console.warn(a);PalmSystem.clearBannerMessage()}}else{this.removeToastRequest=webOS.service.request("palm://com.webos.notification",{method:"cancelToast",parameters:{toastId:e}})}},supportsDashboard:function(){return webOS.platform.legacy||webOS.platform.open},showDashboard:function(e,a){if(webOS.platform.legacy||webOS.platform.open){var o=window.open(e,"_blank",'attributes={"window":"dashboard"}');if(a){o.document.write(a)}if(o.PalmSystem){o.PalmSystem.stageReady()}return o}else{console.warn("Dashboards are not supported on this version of webOS.")}}}})();

 // orientation.js
(function(){webOS.orientation={setOrientation:function(t){if(window.PalmSystem&&PalmSystem.setWindowOrientation){PalmSystem.setWindowOrientation(t)}},getOrientation:function(){if(window.PalmSystem&&PalmSystem.setWindowOrientation){return PalmSystem.windowOrientation}else{return"up"}}}})();

 // pmloglib.js
(function(){var n=-1;var e=0;var o=1;var i=2;var t=3;var r=4;var a=5;var c=6;var l=7;var f=function(n){return!!n&&typeof n==="object"&&Object.prototype.toString.call(n)!=="[object Array]"};var w=function(n,e,o,i){if(window.PalmSystem){if(o&&!f(o)){n=t;o={msgid:e};e="MISMATCHED_FMT";i=null;console.warn("webOSLog called with invalid format: keyVals must be an object")}if(!e&&n!=l){console.warn("webOSLog called with invalid format: messageId was empty")}if(o){o=JSON.stringify(o)}if(window.PalmSystem.PmLogString){if(n==l){window.PalmSystem.PmLogString(n,i)}else{window.PalmSystem.PmLogString(n,e,o,i)}}else{console.error("Unable to send log; PmLogString not found in this version of PalmSystem")}}};webOS.emergency=function(n,o,i){w(e,n,o,i)};webOS.alert=function(n,e,i){w(o,n,e,i)};webOS.critical=function(n,e,o){w(i,n,e,o)};webOS.error=function(n,e,o){w(t,n,e,o)};webOS.warning=function(n,e,o){w(r,n,e,o)};webOS.notice=function(n,e,o){w(a,n,e,o)};webOS.info=function(n,e,o){w(c,n,e,o)};webOS.debug=function(n){w(l,"","",n)}})();

 // service.js
(function(){function e(e,i){this.uri=e;i=i||{};if(i.method){if(this.uri.charAt(this.uri.length-1)!="/"){this.uri+="/"}this.uri+=i.method}if(typeof i.onSuccess==="function"){this.onSuccess=i.onSuccess}if(typeof i.onFailure==="function"){this.onFailure=i.onFailure}if(typeof i.onComplete==="function"){this.onComplete=i.onComplete}this.params=typeof i.parameters==="object"?i.parameters:{};this.subscribe=i.subscribe||false;if(this.subscribe){this.params.subscribe=i.subscribe}if(this.params.subscribe){this.subscribe=this.params.subscribe}this.resubscribe=i.resubscribe||false;this.send()}e.prototype.send=function(){if(!window.PalmServiceBridge){console.error("PalmServiceBridge not found.");return}this.bridge=new PalmServiceBridge;var i=this;this.bridge.onservicecallback=this.callback=function(r){var s;if(i.cancelled){return}try{s=JSON.parse(r)}catch(t){s={errorCode:-1,errorText:r}}if((s.errorCode||s.returnValue==false)&&i.onFailure){i.onFailure(s);if(i.resubscribe&&i.subscribe){i.delayID=setTimeout(function(){i.send()},e.resubscribeDelay)}}else if(i.onSuccess){i.onSuccess(s)}if(i.onComplete){i.onComplete(s)}if(!i.subscribe){i.cancel()}};this.bridge.call(this.uri,JSON.stringify(this.params))};e.prototype.cancel=function(){this.cancelled=true;if(this.resubscribeJob){clearTimeout(this.delayID)}if(this.bridge){this.bridge.cancel();this.bridge=undefined}};e.prototype.toString=function(){return"[LS2Request]"};e.resubscribeDelay=1e4;webOS.service={request:function(i,r){return new e(i,r)},systemPrefix:webOS.platform.legacy||webOS.platform.open?"com.palm":"com.webos",protocol:webOS.platform.legacy&&webOS.device.platformVersionMajor&&parseInt(webOS.device.platformVersionMajor)<=1?"palm://":"luna://"};navigator.service.request=webOS.service.request;navigator.service.Request=navigator.service.request})();

 // window.js
(function(){webOS.window={launchParams:function(e){e=e||window;if(e.PalmSystem){return JSON.parse(e.PalmSystem.launchParams||"{}")||{}}return{}},isActivated:function(e){e=e||window;if(e.PalmSystem){return e.PalmSystem.isActivated}return false},activate:function(e){e=e||window;if(e.PalmSystem){e.PalmSystem.activate()}},deactivate:function(e){e=e||window;if(e.PalmSystem){e.PalmSystem.deactivate()}},newCard:function(e,t){if(!e&&!(webOS.platform.legacy||webOS.platform.open)){e="about:blank"}var i=window.open(e);if(t){i.document.write(t)}if(i.PalmSystem){i.PalmSystem.stageReady()}return i},setFullScreen:function(e){if(window.PalmSystem&&PalmSystem.enableFullScreenMode){PalmSystem.enableFullScreenMode(e)}},setWindowProperties:function(e,t){if(arguments.length==1){t=e;e=window}if(e.PalmSystem&&e.PalmSystem.setWindowProperties){e.webOS.window.properties=t=t||{};e.PalmSystem.setWindowProperties(t)}},getWindowProperties:function(e){e=e||window;e.webOS.window.properties=e.webOS.window.properties||{};return e.webOS.window.properties},blockScreenTimeout:function(e){webOS.window.properties.blockScreenTimeout=e;this.setWindowProperties(navigator.windowProperties)},setSubtleLightbar:function(e){webOS.window.properties.setSubtleLightbar=e;this.setWindowProperties(webOS.window.properties)},setFastAccelerometer:function(e){webOS.window.properties.fastAccelerometer=e;this.setWindowProperties(webOS.window.properties)}}})();

